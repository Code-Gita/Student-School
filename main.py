from web3 import Web3
from web3.middleware import geth_poa_middleware
import json

def print_hi(name):
    # Use a breakpoint in the code line below to debug your script.
    print(f'Hi, {name}')  # Press âŒ˜F8 to toggle the breakpoint.


def send_money(w3):
    account_1 = "0xfe3b557e8fb62b89f4916b721be55ceb828dbd73"
    account_2 = "0x627306090abaB3A6e1400e9345bC60c78a8BEf57"
    private_key_account_1 = "8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63"

    nonce = w3.eth.getTransactionCount(w3.toChecksumAddress(account_1))

    tx = {
        'nonce':nonce,
        'to': account_2,
        'value': w3.toWei(1, 'ether'),
        'gas' : 200000,
        'gasPrice': w3.toWei(50, 'gwei')
    }

    signed_tx = w3.eth.account.signTransaction(tx, private_key_account_1)

    tx_hash = w3.eth.sendRawTransaction(signed_tx.rawTransaction)
    print(w3.toHex(tx_hash))


def get_student_details(w3):
    # my_addr = w3.toChecksumAddress('0x44e85Fb812bCFea3f0ea69A16d3F7Ff37dCADccc')
    my_addr = w3.toChecksumAddress('0xd97C484CA8C8afb703872FA8373B27aeb0F03EA4')
    my_private_key = "e2d0e850dc226ee22f3bb45e2b29e1f986070c9b6b1fd9cd01964b4b42f97dd3"
    w3.eth.defaultAccount = my_addr
    # w3.middleware_onion.inject(geth_poa_middleware, layer=0)

    contract_adr = w3.toChecksumAddress("0x224Cf698fc3E5DE88D952584A25fDeCD8Ce9De0F")
    contract_abi = json.loads(
        '[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"","type":"string"},{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"indexed":false,"internalType":"struct Student.student_info","name":"","type":"tuple"}],"name":"log_details","type":"event"},{"inputs":[{"internalType":"address","name":"st_adr","type":"address"},{"internalType":"address","name":"sch_adr","type":"address"},{"internalType":"string","name":"st_name","type":"string"}],"name":"add_student","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"get_school_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_student_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info","name":"","type":"tuple"}],"stateMutability":"view","type":"function"}]')
    # contr_byte_code = "608060405234801561001057600080fd5b5060008081548092919061002390610037565b91905055506100af565b6000819050919050565b60006100428261002d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561007557610074610080565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6110a3806100be6000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806318602f9c146100465780634ae2aefe146100645780638c47639814610094575b600080fd5b61004e6100b2565b60405161005b9190610cb8565b60405180910390f35b61007e60048036038101906100799190610a29565b610296565b60405161008b9190610cda565b60405180910390f35b61009c610649565b6040516100a99190610d45565b60405180910390f35b6060600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561028d57838290600052602060002090600402016040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820180546101f290610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461021e90610ead565b801561026b5780601f106102405761010080835404028352916020019161026b565b820191906000526020600020905b81548152906001019060200180831161024e57829003601f168201915b5050505050815260200160038201548152505081526020019060010190610113565b50505050905090565b60006102fc60405180606001604052806022815260200161104c60229139600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301546107e8565b6000600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003015414610381576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161037890610d25565b60405180910390fd5b6103896108ad565b84816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505083816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505082816040018190525060008081548092919061041490610f10565b919050555060005481606001818152505080600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201908051906020019061050f929190610901565b5060608201518160030155905050600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002019080519060200190610630929190610901565b5060608201518160030155505060019150509392505050565b6106516108ad565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160028201805461075790610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461078390610ead565b80156107d05780601f106107a5576101008083540402835291602001916107d0565b820191906000526020600020905b8154815290600101906020018083116107b357829003601f168201915b50505050508152602001600382015481525050905090565b61088082826040516024016107fe929190610cf5565b6040516020818303038152906040527f9710a9d0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050610884565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b6040518060800160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160608152602001600081525090565b82805461090d90610ead565b90600052602060002090601f01602090048101928261092f5760008555610976565b82601f1061094857805160ff1916838001178555610976565b82800160010185558215610976579182015b8281111561097557825182559160200191906001019061095a565b5b5090506109839190610987565b5090565b5b808211156109a0576000816000905550600101610988565b5090565b60006109b76109b284610d8c565b610d67565b9050828152602081018484840111156109d3576109d2610feb565b5b6109de848285610e6b565b509392505050565b6000813590506109f581611034565b92915050565b600082601f830112610a1057610a0f610fe6565b5b8135610a208482602086016109a4565b91505092915050565b600080600060608486031215610a4257610a41610ff5565b5b6000610a50868287016109e6565b9350506020610a61868287016109e6565b925050604084013567ffffffffffffffff811115610a8257610a81610ff0565b5b610a8e868287016109fb565b9150509250925092565b6000610aa48383610bd4565b905092915050565b610ab581610e23565b82525050565b6000610ac682610dcd565b610ad08185610df0565b935083602082028501610ae285610dbd565b8060005b85811015610b1e5784840389528151610aff8582610a98565b9450610b0a83610de3565b925060208a01995050600181019050610ae6565b50829750879550505050505092915050565b610b3981610e35565b82525050565b6000610b4a82610dd8565b610b548185610e01565b9350610b64818560208601610e7a565b610b6d81610ffa565b840191505092915050565b6000610b8382610dd8565b610b8d8185610e12565b9350610b9d818560208601610e7a565b610ba681610ffa565b840191505092915050565b6000610bbe601d83610e12565b9150610bc98261100b565b602082019050919050565b6000608083016000830151610bec6000860182610aac565b506020830151610bff6020860182610aac565b5060408301518482036040860152610c178282610b3f565b9150506060830151610c2c6060860182610c9a565b508091505092915050565b6000608083016000830151610c4f6000860182610aac565b506020830151610c626020860182610aac565b5060408301518482036040860152610c7a8282610b3f565b9150506060830151610c8f6060860182610c9a565b508091505092915050565b610ca381610e61565b82525050565b610cb281610e61565b82525050565b60006020820190508181036000830152610cd28184610abb565b905092915050565b6000602082019050610cef6000830184610b30565b92915050565b60006040820190508181036000830152610d0f8185610b78565b9050610d1e6020830184610ca9565b9392505050565b60006020820190508181036000830152610d3e81610bb1565b9050919050565b60006020820190508181036000830152610d5f8184610c37565b905092915050565b6000610d71610d82565b9050610d7d8282610edf565b919050565b6000604051905090565b600067ffffffffffffffff821115610da757610da6610fb7565b5b610db082610ffa565b9050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b6000610e2e82610e41565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015610e98578082015181840152602081019050610e7d565b83811115610ea7576000848401525b50505050565b60006002820490506001821680610ec557607f821691505b60208210811415610ed957610ed8610f88565b5b50919050565b610ee882610ffa565b810181811067ffffffffffffffff82111715610f0757610f06610fb7565b5b80604052505050565b6000610f1b82610e61565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610f4e57610f4d610f59565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f53545544454e5420414c52454144592045584953545320494e2044422e000000600082015250565b61103d81610e23565b811461104857600080fd5b5056fe73747564656e745f766965775b73745f6164725d2e73747564656e745f6964203a20a26469706673582212205f439bcf400f0eeefbbf49c4877864cdae940a1c12128e464c525f0e51b32f0a64736f6c63430008060033"

    contract = w3.eth.contract(address=contract_adr, abi=contract_abi)
    val = contract.functions.get_student_info().call()
    print(val)

def send_tx(w3):
    my_addr = w3.toChecksumAddress('0xfe3b557e8fb62b89f4916b721be55ceb828dbd73')
    my_private_key = "8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63"
    w3.eth.defaultAccount = my_addr
    w3.middleware_onion.inject(geth_poa_middleware, layer=0)

    contract_adr = w3.toChecksumAddress("0x224Cf698fc3E5DE88D952584A25fDeCD8Ce9De0F")
    contract_abi = json.loads(
        '[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"","type":"string"},{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"indexed":false,"internalType":"struct Student.student_info","name":"","type":"tuple"}],"name":"log_details","type":"event"},{"inputs":[{"internalType":"address","name":"st_adr","type":"address"},{"internalType":"address","name":"sch_adr","type":"address"},{"internalType":"string","name":"st_name","type":"string"}],"name":"add_student","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"get_school_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_student_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info","name":"","type":"tuple"}],"stateMutability":"view","type":"function"}]')
    contr_byte_code = "608060405234801561001057600080fd5b5060008081548092919061002390610037565b91905055506100af565b6000819050919050565b60006100428261002d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561007557610074610080565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6110a3806100be6000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806318602f9c146100465780634ae2aefe146100645780638c47639814610094575b600080fd5b61004e6100b2565b60405161005b9190610cb8565b60405180910390f35b61007e60048036038101906100799190610a29565b610296565b60405161008b9190610cda565b60405180910390f35b61009c610649565b6040516100a99190610d45565b60405180910390f35b6060600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561028d57838290600052602060002090600402016040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820180546101f290610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461021e90610ead565b801561026b5780601f106102405761010080835404028352916020019161026b565b820191906000526020600020905b81548152906001019060200180831161024e57829003601f168201915b5050505050815260200160038201548152505081526020019060010190610113565b50505050905090565b60006102fc60405180606001604052806022815260200161104c60229139600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301546107e8565b6000600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003015414610381576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161037890610d25565b60405180910390fd5b6103896108ad565b84816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505083816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505082816040018190525060008081548092919061041490610f10565b919050555060005481606001818152505080600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201908051906020019061050f929190610901565b5060608201518160030155905050600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002019080519060200190610630929190610901565b5060608201518160030155505060019150509392505050565b6106516108ad565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160028201805461075790610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461078390610ead565b80156107d05780601f106107a5576101008083540402835291602001916107d0565b820191906000526020600020905b8154815290600101906020018083116107b357829003601f168201915b50505050508152602001600382015481525050905090565b61088082826040516024016107fe929190610cf5565b6040516020818303038152906040527f9710a9d0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050610884565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b6040518060800160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160608152602001600081525090565b82805461090d90610ead565b90600052602060002090601f01602090048101928261092f5760008555610976565b82601f1061094857805160ff1916838001178555610976565b82800160010185558215610976579182015b8281111561097557825182559160200191906001019061095a565b5b5090506109839190610987565b5090565b5b808211156109a0576000816000905550600101610988565b5090565b60006109b76109b284610d8c565b610d67565b9050828152602081018484840111156109d3576109d2610feb565b5b6109de848285610e6b565b509392505050565b6000813590506109f581611034565b92915050565b600082601f830112610a1057610a0f610fe6565b5b8135610a208482602086016109a4565b91505092915050565b600080600060608486031215610a4257610a41610ff5565b5b6000610a50868287016109e6565b9350506020610a61868287016109e6565b925050604084013567ffffffffffffffff811115610a8257610a81610ff0565b5b610a8e868287016109fb565b9150509250925092565b6000610aa48383610bd4565b905092915050565b610ab581610e23565b82525050565b6000610ac682610dcd565b610ad08185610df0565b935083602082028501610ae285610dbd565b8060005b85811015610b1e5784840389528151610aff8582610a98565b9450610b0a83610de3565b925060208a01995050600181019050610ae6565b50829750879550505050505092915050565b610b3981610e35565b82525050565b6000610b4a82610dd8565b610b548185610e01565b9350610b64818560208601610e7a565b610b6d81610ffa565b840191505092915050565b6000610b8382610dd8565b610b8d8185610e12565b9350610b9d818560208601610e7a565b610ba681610ffa565b840191505092915050565b6000610bbe601d83610e12565b9150610bc98261100b565b602082019050919050565b6000608083016000830151610bec6000860182610aac565b506020830151610bff6020860182610aac565b5060408301518482036040860152610c178282610b3f565b9150506060830151610c2c6060860182610c9a565b508091505092915050565b6000608083016000830151610c4f6000860182610aac565b506020830151610c626020860182610aac565b5060408301518482036040860152610c7a8282610b3f565b9150506060830151610c8f6060860182610c9a565b508091505092915050565b610ca381610e61565b82525050565b610cb281610e61565b82525050565b60006020820190508181036000830152610cd28184610abb565b905092915050565b6000602082019050610cef6000830184610b30565b92915050565b60006040820190508181036000830152610d0f8185610b78565b9050610d1e6020830184610ca9565b9392505050565b60006020820190508181036000830152610d3e81610bb1565b9050919050565b60006020820190508181036000830152610d5f8184610c37565b905092915050565b6000610d71610d82565b9050610d7d8282610edf565b919050565b6000604051905090565b600067ffffffffffffffff821115610da757610da6610fb7565b5b610db082610ffa565b9050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b6000610e2e82610e41565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015610e98578082015181840152602081019050610e7d565b83811115610ea7576000848401525b50505050565b60006002820490506001821680610ec557607f821691505b60208210811415610ed957610ed8610f88565b5b50919050565b610ee882610ffa565b810181811067ffffffffffffffff82111715610f0757610f06610fb7565b5b80604052505050565b6000610f1b82610e61565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610f4e57610f4d610f59565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f53545544454e5420414c52454144592045584953545320494e2044422e000000600082015250565b61103d81610e23565b811461104857600080fd5b5056fe73747564656e745f766965775b73745f6164725d2e73747564656e745f6964203a20a26469706673582212205f439bcf400f0eeefbbf49c4877864cdae940a1c12128e464c525f0e51b32f0a64736f6c63430008060033"

    contract = w3.eth.contract(address=contract_adr, abi=contract_abi)
    # contract.functions.get_student_info().call()

    student_adr = w3.toChecksumAddress('0xd97C484CA8C8afb703872FA8373B27aeb0F03EA4')
    school_adr = w3.toChecksumAddress('0x26B83476c41966044CFc7e9aB1dBA26Eef215679')
    student_name = 'Radhe'

    nonce = w3.eth.getTransactionCount(my_addr)
    chainId = 2018
    # transaction = contract.constructor().buildTransaction({"chainId": chainId, "from": my_addr, "nonce": nonce})
    # print(transaction)

    store_tx = contract.functions.add_student(student_adr, school_adr, student_name).buildTransaction(
        {"chainId": chainId, "from": my_addr, "nonce": nonce, 'gas': 2000000, 'gasPrice': w3.toWei(510, 'gwei')})
    sign_tx = w3.eth.account.signTransaction(store_tx, private_key=my_private_key)
    tx_hash = w3.eth.sendRawTransaction(sign_tx.rawTransaction)
    tx_reciept = w3.eth.waitForTransactionReceipt(tx_hash)
    print(w3.toHex(tx_hash))
    print()
    print('tx_reciept : '+str(tx_reciept))


def add_student_information_from_input_file(w3):
    my_addr = w3.toChecksumAddress('0xfe3b557e8fb62b89f4916b721be55ceb828dbd73')
    my_private_key = "8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63"
    w3.eth.defaultAccount = my_addr
    w3.middleware_onion.inject(geth_poa_middleware, layer=0)

    contract_adr = w3.toChecksumAddress("0x224Cf698fc3E5DE88D952584A25fDeCD8Ce9De0F")
    contract_abi = json.loads(
        '[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"","type":"string"},{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"indexed":false,"internalType":"struct Student.student_info","name":"","type":"tuple"}],"name":"log_details","type":"event"},{"inputs":[{"internalType":"address","name":"st_adr","type":"address"},{"internalType":"address","name":"sch_adr","type":"address"},{"internalType":"string","name":"st_name","type":"string"}],"name":"add_student","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"get_school_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_student_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info","name":"","type":"tuple"}],"stateMutability":"view","type":"function"}]')
    contr_byte_code = "608060405234801561001057600080fd5b5060008081548092919061002390610037565b91905055506100af565b6000819050919050565b60006100428261002d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561007557610074610080565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6110a3806100be6000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806318602f9c146100465780634ae2aefe146100645780638c47639814610094575b600080fd5b61004e6100b2565b60405161005b9190610cb8565b60405180910390f35b61007e60048036038101906100799190610a29565b610296565b60405161008b9190610cda565b60405180910390f35b61009c610649565b6040516100a99190610d45565b60405180910390f35b6060600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561028d57838290600052602060002090600402016040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820180546101f290610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461021e90610ead565b801561026b5780601f106102405761010080835404028352916020019161026b565b820191906000526020600020905b81548152906001019060200180831161024e57829003601f168201915b5050505050815260200160038201548152505081526020019060010190610113565b50505050905090565b60006102fc60405180606001604052806022815260200161104c60229139600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301546107e8565b6000600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003015414610381576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161037890610d25565b60405180910390fd5b6103896108ad565b84816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505083816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505082816040018190525060008081548092919061041490610f10565b919050555060005481606001818152505080600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201908051906020019061050f929190610901565b5060608201518160030155905050600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002019080519060200190610630929190610901565b5060608201518160030155505060019150509392505050565b6106516108ad565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160028201805461075790610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461078390610ead565b80156107d05780601f106107a5576101008083540402835291602001916107d0565b820191906000526020600020905b8154815290600101906020018083116107b357829003601f168201915b50505050508152602001600382015481525050905090565b61088082826040516024016107fe929190610cf5565b6040516020818303038152906040527f9710a9d0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050610884565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b6040518060800160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160608152602001600081525090565b82805461090d90610ead565b90600052602060002090601f01602090048101928261092f5760008555610976565b82601f1061094857805160ff1916838001178555610976565b82800160010185558215610976579182015b8281111561097557825182559160200191906001019061095a565b5b5090506109839190610987565b5090565b5b808211156109a0576000816000905550600101610988565b5090565b60006109b76109b284610d8c565b610d67565b9050828152602081018484840111156109d3576109d2610feb565b5b6109de848285610e6b565b509392505050565b6000813590506109f581611034565b92915050565b600082601f830112610a1057610a0f610fe6565b5b8135610a208482602086016109a4565b91505092915050565b600080600060608486031215610a4257610a41610ff5565b5b6000610a50868287016109e6565b9350506020610a61868287016109e6565b925050604084013567ffffffffffffffff811115610a8257610a81610ff0565b5b610a8e868287016109fb565b9150509250925092565b6000610aa48383610bd4565b905092915050565b610ab581610e23565b82525050565b6000610ac682610dcd565b610ad08185610df0565b935083602082028501610ae285610dbd565b8060005b85811015610b1e5784840389528151610aff8582610a98565b9450610b0a83610de3565b925060208a01995050600181019050610ae6565b50829750879550505050505092915050565b610b3981610e35565b82525050565b6000610b4a82610dd8565b610b548185610e01565b9350610b64818560208601610e7a565b610b6d81610ffa565b840191505092915050565b6000610b8382610dd8565b610b8d8185610e12565b9350610b9d818560208601610e7a565b610ba681610ffa565b840191505092915050565b6000610bbe601d83610e12565b9150610bc98261100b565b602082019050919050565b6000608083016000830151610bec6000860182610aac565b506020830151610bff6020860182610aac565b5060408301518482036040860152610c178282610b3f565b9150506060830151610c2c6060860182610c9a565b508091505092915050565b6000608083016000830151610c4f6000860182610aac565b506020830151610c626020860182610aac565b5060408301518482036040860152610c7a8282610b3f565b9150506060830151610c8f6060860182610c9a565b508091505092915050565b610ca381610e61565b82525050565b610cb281610e61565b82525050565b60006020820190508181036000830152610cd28184610abb565b905092915050565b6000602082019050610cef6000830184610b30565b92915050565b60006040820190508181036000830152610d0f8185610b78565b9050610d1e6020830184610ca9565b9392505050565b60006020820190508181036000830152610d3e81610bb1565b9050919050565b60006020820190508181036000830152610d5f8184610c37565b905092915050565b6000610d71610d82565b9050610d7d8282610edf565b919050565b6000604051905090565b600067ffffffffffffffff821115610da757610da6610fb7565b5b610db082610ffa565b9050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b6000610e2e82610e41565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015610e98578082015181840152602081019050610e7d565b83811115610ea7576000848401525b50505050565b60006002820490506001821680610ec557607f821691505b60208210811415610ed957610ed8610f88565b5b50919050565b610ee882610ffa565b810181811067ffffffffffffffff82111715610f0757610f06610fb7565b5b80604052505050565b6000610f1b82610e61565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610f4e57610f4d610f59565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f53545544454e5420414c52454144592045584953545320494e2044422e000000600082015250565b61103d81610e23565b811461104857600080fd5b5056fe73747564656e745f766965775b73745f6164725d2e73747564656e745f6964203a20a26469706673582212205f439bcf400f0eeefbbf49c4877864cdae940a1c12128e464c525f0e51b32f0a64736f6c63430008060033"

    contract = w3.eth.contract(address=contract_adr, abi=contract_abi)
    # contract.functions.get_student_info().call()
    for (key, value) in input_file.items():
        print(key, value)
        for (key_1, value_1) in value.items():
            # student_adr = w3.toChecksumAddress('0xd97C484CA8C8afb703872FA8373B27aeb0F03EA4')
            # school_adr = w3.toChecksumAddress('0x26B83476c41966044CFc7e9aB1dBA26Eef215679')
            # student_name = 'Radhe'
            print(key_1,value_1)
            student_adr = w3.toChecksumAddress(key_1)
            school_adr = w3.toChecksumAddress(school_config[key])
            student_name = value_1

            nonce = w3.eth.getTransactionCount(my_addr)
            chainId = 2018
            # transaction = contract.constructor().buildTransaction({"chainId": chainId, "from": my_addr, "nonce": nonce})
            # print(transaction)

            store_tx = contract.functions.add_student(student_adr, school_adr, student_name).buildTransaction(
                {"chainId": chainId, "from": my_addr, "nonce": nonce, 'gas': 2000000, 'gasPrice': w3.toWei(510, 'gwei')})
            sign_tx = w3.eth.account.signTransaction(store_tx, private_key=my_private_key)
            tx_hash = w3.eth.sendRawTransaction(sign_tx.rawTransaction)
            tx_reciept = w3.eth.waitForTransactionReceipt(tx_hash)
            print(w3.toHex(tx_hash))
            print()
            print('tx_reciept : ' + str(tx_reciept))
    '''my_addr = w3.toChecksumAddress('0xfe3b557e8fb62b89f4916b721be55ceb828dbd73')
    my_private_key = "8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63"
    w3.eth.defaultAccount = my_addr
    w3.middleware_onion.inject(geth_poa_middleware, layer=0)

    contract_adr = w3.toChecksumAddress("0x2c7007b546D1556F2796943cC4c9C256508BB0Ef")
    contract_abi = json.loads(
        '[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"","type":"string"},{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"indexed":false,"internalType":"struct Student.student_info","name":"","type":"tuple"}],"name":"log_details","type":"event"},{"inputs":[{"internalType":"address","name":"st_adr","type":"address"},{"internalType":"address","name":"sch_adr","type":"address"},{"internalType":"string","name":"st_name","type":"string"}],"name":"add_student","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"get_school_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_student_info","outputs":[{"components":[{"internalType":"address","name":"student_addr","type":"address"},{"internalType":"address","name":"school_addr","type":"address"},{"internalType":"string","name":"student_name","type":"string"},{"internalType":"uint256","name":"student_id","type":"uint256"}],"internalType":"struct Student.student_info","name":"","type":"tuple"}],"stateMutability":"view","type":"function"}]')
    # contr_byte_code = "608060405234801561001057600080fd5b5060008081548092919061002390610037565b91905055506100af565b6000819050919050565b60006100428261002d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561007557610074610080565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6110a3806100be6000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806318602f9c146100465780634ae2aefe146100645780638c47639814610094575b600080fd5b61004e6100b2565b60405161005b9190610cb8565b60405180910390f35b61007e60048036038101906100799190610a29565b610296565b60405161008b9190610cda565b60405180910390f35b61009c610649565b6040516100a99190610d45565b60405180910390f35b6060600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561028d57838290600052602060002090600402016040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820180546101f290610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461021e90610ead565b801561026b5780601f106102405761010080835404028352916020019161026b565b820191906000526020600020905b81548152906001019060200180831161024e57829003601f168201915b5050505050815260200160038201548152505081526020019060010190610113565b50505050905090565b60006102fc60405180606001604052806022815260200161104c60229139600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301546107e8565b6000600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003015414610381576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161037890610d25565b60405180910390fd5b6103896108ad565b84816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505083816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505082816040018190525060008081548092919061041490610f10565b919050555060005481606001818152505080600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201908051906020019061050f929190610901565b5060608201518160030155905050600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040820151816002019080519060200190610630929190610901565b5060608201518160030155505060019150509392505050565b6106516108ad565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160028201805461075790610ead565b80601f016020809104026020016040519081016040528092919081815260200182805461078390610ead565b80156107d05780601f106107a5576101008083540402835291602001916107d0565b820191906000526020600020905b8154815290600101906020018083116107b357829003601f168201915b50505050508152602001600382015481525050905090565b61088082826040516024016107fe929190610cf5565b6040516020818303038152906040527f9710a9d0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050610884565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b6040518060800160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160608152602001600081525090565b82805461090d90610ead565b90600052602060002090601f01602090048101928261092f5760008555610976565b82601f1061094857805160ff1916838001178555610976565b82800160010185558215610976579182015b8281111561097557825182559160200191906001019061095a565b5b5090506109839190610987565b5090565b5b808211156109a0576000816000905550600101610988565b5090565b60006109b76109b284610d8c565b610d67565b9050828152602081018484840111156109d3576109d2610feb565b5b6109de848285610e6b565b509392505050565b6000813590506109f581611034565b92915050565b600082601f830112610a1057610a0f610fe6565b5b8135610a208482602086016109a4565b91505092915050565b600080600060608486031215610a4257610a41610ff5565b5b6000610a50868287016109e6565b9350506020610a61868287016109e6565b925050604084013567ffffffffffffffff811115610a8257610a81610ff0565b5b610a8e868287016109fb565b9150509250925092565b6000610aa48383610bd4565b905092915050565b610ab581610e23565b82525050565b6000610ac682610dcd565b610ad08185610df0565b935083602082028501610ae285610dbd565b8060005b85811015610b1e5784840389528151610aff8582610a98565b9450610b0a83610de3565b925060208a01995050600181019050610ae6565b50829750879550505050505092915050565b610b3981610e35565b82525050565b6000610b4a82610dd8565b610b548185610e01565b9350610b64818560208601610e7a565b610b6d81610ffa565b840191505092915050565b6000610b8382610dd8565b610b8d8185610e12565b9350610b9d818560208601610e7a565b610ba681610ffa565b840191505092915050565b6000610bbe601d83610e12565b9150610bc98261100b565b602082019050919050565b6000608083016000830151610bec6000860182610aac565b506020830151610bff6020860182610aac565b5060408301518482036040860152610c178282610b3f565b9150506060830151610c2c6060860182610c9a565b508091505092915050565b6000608083016000830151610c4f6000860182610aac565b506020830151610c626020860182610aac565b5060408301518482036040860152610c7a8282610b3f565b9150506060830151610c8f6060860182610c9a565b508091505092915050565b610ca381610e61565b82525050565b610cb281610e61565b82525050565b60006020820190508181036000830152610cd28184610abb565b905092915050565b6000602082019050610cef6000830184610b30565b92915050565b60006040820190508181036000830152610d0f8185610b78565b9050610d1e6020830184610ca9565b9392505050565b60006020820190508181036000830152610d3e81610bb1565b9050919050565b60006020820190508181036000830152610d5f8184610c37565b905092915050565b6000610d71610d82565b9050610d7d8282610edf565b919050565b6000604051905090565b600067ffffffffffffffff821115610da757610da6610fb7565b5b610db082610ffa565b9050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b6000610e2e82610e41565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015610e98578082015181840152602081019050610e7d565b83811115610ea7576000848401525b50505050565b60006002820490506001821680610ec557607f821691505b60208210811415610ed957610ed8610f88565b5b50919050565b610ee882610ffa565b810181811067ffffffffffffffff82111715610f0757610f06610fb7565b5b80604052505050565b6000610f1b82610e61565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610f4e57610f4d610f59565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f53545544454e5420414c52454144592045584953545320494e2044422e000000600082015250565b61103d81610e23565b811461104857600080fd5b5056fe73747564656e745f766965775b73745f6164725d2e73747564656e745f6964203a20a26469706673582212205f439bcf400f0eeefbbf49c4877864cdae940a1c12128e464c525f0e51b32f0a64736f6c63430008060033"

    contract = w3.eth.contract(address=contract_adr, abi=contract_abi)
    # contract.functions.get_student_info().call()

    # student_adr = w3.toChecksumAddress('0x26B83476c41966044CFc7e9aB1dBA26Eef215679')
    # school_adr = w3.toChecksumAddress('0x142fCD23CaF6c96C84754a7C08e85B727cA560e1')
    # student_name = 'Raju'

    for (key, value) in input_file.items():
        print(key, value)
        for (key_1, value_1) in value.items():
            student_adr = w3.toChecksumAddress(key_1)
            school_adr = w3.toChecksumAddress(school_config[key])
            student_name = value_1
            nonce = w3.eth.getTransactionCount(my_addr)
            chainId = 2018
            print("Sending values :\n\tstudent_adr : ", student_adr, "\n\tschool_adr:", school_adr, "\n\tstudent_name:", student_name)
            store_tx = contract.functions.add_student(student_adr, school_adr, student_name).buildTransaction(
                {"chainId": chainId, "from": my_addr, "nonce": nonce, 'gas': 200000, 'gasPrice': w3.toWei(510, 'gwei')})
            sign_tx = w3.eth.account.signTransaction(store_tx, private_key=my_private_key)
            tx_hash = w3.eth.sendRawTransaction(sign_tx.rawTransaction)
            tx_reciept = w3.eth.waitForTransactionReceipt(tx_hash)
            tx_status = w3.eth.getTransactionReceipt(tx_hash)
            print('tx_status' + str(tx_status))
            print(w3.toHex(tx_hash))
            # print(tx_reciept)'''


def load_config():
    global school_config
    file_content = open("./config/school_details.json", 'r')
    school_config = json.load(file_content)
    file_content.close()
    # print(school_config)


def load_input_file():
    global input_file
    input_file_content = open("./input_data/data.json", 'r')
    input_file = json.load(input_file_content)
    input_file_content.close()
    # print("input_file 1" ,input_file, " ", input_file_content)


# Press the green button in the gutter to run the script.
if __name__ == '__main__':
    school_config = dict()
    input_file = dict()
    print_hi('PyCharm')
    url = 'http://34.125.185.8:8546'

    w3 = Web3(Web3.HTTPProvider(url))
    print(w3.isConnected())
    print(w3.eth.blockNumber)
    load_config()
    print("school_config : ", school_config)

    load_input_file()
    print("input_file :", input_file)

    add_student_information_from_input_file(w3)
    # send_money(w3)
    print()
    # send_tx(w3)
    print()
    get_student_details(w3)

# See PyCharm help at https://www.jetbrains.com/help/pycharm/
